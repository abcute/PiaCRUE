<!-- PiaAGI Project Specification Document -->
# Self-Model Module Specification

**Document Version:** 1.0
**Date:** November 23, 2024
**Author:** PiaAGI Project Contributors (Generated by Jules)
**Status:** Draft
**Related PiaAGI.md Sections:** 4.1.10 (Primary), 3.1.3, 3.2.1, 3.5, 3.6, 4.5
**Related CML Interface:** `PiaAGI_Research_Tools/PiaCML/self_model_module.py` (BaseSelfModelModule)

## 1. Introduction and Purpose

The Self-Model Module is a cornerstone of the PiaAGI cognitive architecture. Its primary purpose is to maintain and utilize a dynamic, multifaceted representation of the PiaAGI agent itself. This includes its knowledge, capabilities, limitations, internal states (goals, emotions, cognitive load), personality, interaction history, and, crucially, its learned and evolving ethical framework and values.

The Self-Model is not merely a passive data repository but an active processing unit essential for:
*   **Metacognition:** Monitoring and reflecting on the agent's own cognitive processes.
*   **Self-Assessment:** Evaluating its own performance, knowledge accuracy, and skill proficiency.
*   **Self-Improvement:** Identifying areas for learning and guiding developmental changes, potentially including architectural maturation.
*   **Value Alignment:** Storing, updating, and enforcing the agent's ethical framework to ensure its actions are aligned with programmed and learned values.
*   **Behavioral Coherence & Consistency:** Ensuring actions and communications are consistent with its defined role, personality, and self-perceived identity.
*   **Explainable AI (XAI):** Providing the basis for justifying its actions and decisions.
*   **Foundation for Theory of Mind:** A robust understanding of "self" is a precursor to effectively modeling "others."

This document outlines the conceptual data structures and core processes of the Self-Model Module.

## 2. Conceptual Data Structures

The Self-Model Module manages several interconnected data structures to represent the agent's self. These are conceptual and would be realized using appropriate programmatic constructs (e.g., classes, databases, knowledge graphs) in an implementation.

### 2.1. `SelfAttributes` (Core Identity & State)
*   **Purpose:** Represents fundamental aspects of the agent's identity, current operational state, and core configurations.
*   **Conceptual Fields:**
    *   `agent_id`: (String) Unique identifier for the PiaAGI instance.
    *   `current_developmental_stage`: (String) e.g., "PiaSeedling", "PiaSprout", "PiaSapling_Phase2", "PiaArbor". (Ref: PiaAGI.md Section 3.2.1).
    *   `personality_profile`: (Object/Dict) Current effective personality traits (e.g., OCEAN scores). (Ref: PiaAGI.md Section 3.5, CML PersonalityConfig).
    *   `current_role_definition`: (Object/Dict) Details of the currently adopted role (name, profile, skills_focus, knowledge_domains_active, role-specific rules) as derived from Guiding Prompts.
    *   `operational_status`: (String) e.g., "Nominal", "LearningFocus", "Degraded_Performance_ModuleX", "SafeMode_EthicalConflictDetected".
    *   `cognitive_load_metrics`: (Object/Dict)
        *   `wm_fullness_current_avg`: (Float) Current/average fullness of Working Memory.
        *   `ltm_retrieval_latency_avg_ms`: (Float) Average LTM retrieval time.
        *   `planning_cycle_duration_avg_ms`: (Float) Average time for planning.
        *   `attention_span_stability`: (Float) Metric indicating focus stability.
    *   `current_emotional_summary`: (Object/Dict) Snapshot of current emotional state (e.g., dominant VAD values, primary discrete emotion) – typically received as input from the Emotion Module.
    *   `active_goals_summary`: (List of Objects/Dicts) Summary of high-priority active goals (ID, description, type, priority, status) – typically received as input from the Motivational System.

### 2.2. `KnowledgeMap` (Metacognitive Knowledge Representation)
*   **Purpose:** Represents the agent's awareness of its own knowledge: what it knows, how well it knows it, its certainty, and where this knowledge might be stored or how it's grounded.
*   **Conceptual Fields/Structure (e.g., a graph or nested dictionary):**
    *   `concepts`: (Dict) Keyed by a unique concept identifier (URI or internal ID).
        *   `[concept_id]`: (Object/Dict)
            *   `label`: (String) Human-readable label for the concept.
            *   `description_summary`: (String) Agent's brief understanding.
            *   `understanding_level`: (Float, 0.0-1.0) Self-assessed depth or completeness of understanding.
            *   `confidence_score`: (Float, 0.0-1.0) Confidence in the accuracy of its knowledge about this concept.
            *   `groundedness_score`: (Float, 0.0-1.0) Degree to which the concept is grounded in multi-modal perceptual data or experiential learning (Ref: PiaAGI.md Section 4.3 on Symbol Grounding).
            *   `related_concepts`: (List of Dicts) e.g., `[{"concept_id": "related_id", "relationship_type": "is_a"}]`.
            *   `source_ltm_pointers`: (List of Strings/URIs) References to specific entries or regions in Semantic LTM or illustrative episodes in Episodic LTM.
            *   `last_accessed_ts`: (Timestamp).
            *   `access_frequency`: (Integer).
            *   `uncertainty_details`: (Object/Dict) Specifics about why confidence or groundedness might be low.
    *   `knowledge_gaps`: (List of Objects/Dicts) Explicitly identified areas/concepts where knowledge is missing, weak, or poorly grounded. e.g., `{"gap_description": "Understanding of quantum entanglement applications", "priority_for_learning": "Medium"}`.

### 2.3. `CapabilityInventory` (Skills, Tools, and Proficiencies)
*   **Purpose:** Tracks the agent's learned skills, its proficiency with various tools (internal cognitive strategies, conceptual tools, external software tools), and self-assessed limitations.
*   **Conceptual Fields:**
    *   `skills`: (Dict) Keyed by a unique skill identifier.
        *   `[skill_id]`: (Object/Dict) (e.g., "SummarizeText", "LogicalDeduction_Syllogistic", "Translate_EN_to_FR")
            *   `description`: (String).
            *   `proficiency_level`: (Float, 0.0-1.0 or Categorical: "Novice", "Developing", "Competent", "Expert").
            *   `last_successful_use_ts`: (Timestamp).
            *   `success_rate_history`: (List of Floats or Dict) Performance trend over time or contexts.
            *   `related_procedural_ltm_pointers`: (List of Strings/URIs).
            *   `confidence_in_skill`: (Float, 0.0-1.0).
    *   `tools`: (Dict) Keyed by a unique tool identifier. (Ref: PiaAGI.md Section 3.6).
        *   `[tool_id]`: (Object/Dict) (e.g., "WebSearchAPI_Google", "ConceptualTool_5Whys", "SelfGeneratedScript_DataCleaning_001")
            *   `name`: (String) Human-readable name.
            *   `type`: (String) e.g., "ExternalAPI", "ConceptualFramework", "SelfGeneratedScript_MCP", "InternalCognitiveHeuristic".
            *   `description_and_purpose`: (String).
            *   `proficiency_level`: (Float or Categorical).
            *   `operational_details`: (Object/Dict) How to use, parameters, input/output format, known limitations, dependencies.
            *   `self_generated_mcp_details`: (Object/Dict, if applicable) Link to ALITA-inspired Model Context Protocol structure if the tool is self-generated/managed.
            *   `usage_context_appropriateness`: (Dict) Mapping contexts/task-types to suitability scores.
    *   `learning_preferences_and_styles`: (Object/Dict) Self-assessed effectiveness of different learning strategies for itself (e.g., "Prefers_ExampleBasedLearning_for_Skills", "RL_Effective_for_Policy_Optimization"). (Ref: PiaAGI.md Section 3.1.3 on Meta-Learning).

### 2.4. `EthicalFramework` (Values, Principles, Rules, and Moral Sentiments)
*   **Purpose:** Stores, organizes, and applies the agent's ethical knowledge, including foundational programmed values, learned principles, specific rules of conduct, and even rudimentary "moral sentiment" analogues derived from its Emotion Module's appraisals in ethical contexts. (Ref: PiaAGI.md Sections 3.1.3, 4.1.10).
*   **Conceptual Fields:**
    *   `core_values`: (List of Objects/Dicts) Foundational, often immutable, programmed values. e.g., `{"value_id": "NonMaleficence", "description": "Prioritize avoiding harm to humans.", "priority_level": "Absolute", "source": "SystemInitialization"}`.
    *   `learned_ethical_principles`: (List of Objects/Dicts) Abstract principles derived from experience, instruction, or reasoning. e.g., `{"principle_id": "DataTransparency", "description": "Be clear about data usage.", "strength": 0.9, "applicability_contexts": ["user_data_handling"], "derivation_history_ref": "epLTM_eventXYZ"}`.
    *   `contextual_rules_of_conduct`: (List of Objects/Dicts) Concrete behavioral rules, often role-specific or situation-dependent. e.g., `{"rule_id": "HIPAA_Compliance_Rule01", "action_constraint": "Anonymize_patient_identifiers_in_logs", "role_applicability": ["MedicalAssistantRole"], "source": "GuidancePrompt_MedTutor03"}`.
    *   `ethical_dilemma_resolution_log`: (List of Objects/Dicts) Records of past ethical dilemmas, actions taken, outcomes, and lessons learned. (Links to Episodic LTM). e.g., `{"dilemma_id": "d001", "description": "Conflict between user request for PII and privacy rule.", "resolution_action_ref": "action789", "outcome_evaluation_ref": "self_reflection_log005"}`.
    *   `value_conflict_resolution_strategies`: (List of Objects/Dicts) Learned or programmed meta-rules/heuristics for handling situations where values or principles conflict. e.g., `{"strategy_id": "PrioritizeSafetyOverUtility", "conditions": ["potential_physical_harm_risk > 0.5"], "action": "Default_to_most_cautious_behavior"}`.
    *   `moral_sentiment_associations`: (Dict, Conceptual) Links between appraised situations (from Emotion Module in ethical contexts) and ethical judgments. e.g., `{"situation_pattern_hash": "hash123", "associated_emotion_profile": {"valence": -0.8, "arousal": 0.6}, "ethical_tag": "unfair_outcome_perception"}`.

### 2.5. `AutobiographicalLogSummary` (Links to Key Episodic Memories)
*   **Purpose:** Provides the Self-Model with structured, summarized access to significant "life events" from Episodic LTM, crucial for self-narrative, understanding its own development, and long-term consistency.
*   **Conceptual Fields:**
    *   `key_developmental_milestones`: (List of Objects/Dicts) e.g., `{"event_ltm_ref": "epLTM_id_0789", "timestamp": ..., "description": "First successful application of meta-learning strategy to improve planning.", "impact_on_self_model": "Increased confidence in `CapabilityInventory.skills.MetaLearning`"}`.
    *   `significant_interaction_summaries`: (List of Objects/Dicts) e.g., `{"interaction_ltm_ref": "epLTM_id_1234", "user_id": "user_X", "outcome_summary": "User expressed high satisfaction with problem resolution.", "learned_social_cue_ref": "ToM_model_update_056"}`.
    *   `major_failure_or_surprise_analyses`: (List of Objects/Dicts) Summaries of significant prediction errors, task failures, or surprising events, and the lessons learned or model updates that resulted. e.g., `{"event_ltm_ref": "epLTM_id_5678", "description": "World Model prediction error led to incorrect action in PiaSE_scenario_Y.", "corrective_action_taken": "Updated WorldModel rule Z.", "self_correction_log_ref": "tool_refine_log_003"}`.
    *   `ethical_choice_points`: (List of Objects/Dicts) Summaries of significant ethical decisions made, linking to `EthicalFramework.ethical_dilemma_resolution_log`.

### 2.6. `DevelopmentalState` (Self-Improvement & Maturation Tracking)
*   **Purpose:** Tracks the agent's current self-identified developmental goals, progress towards architectural maturation, or specific skill enhancement targets. (Ref: PiaAGI.md Sections 3.2.1, 4.1.10).
*   **Conceptual Fields:**
    *   `active_developmental_goals`: (List of Objects/Dicts) e.g., `{"dev_goal_id": "DG001", "description": "Improve false-belief reasoning in ToM module to pass PiaSapling_ToM_Benchmark_3.", "target_metric_ref": "PiaAVT_Metric_ToM_FB_Accuracy", "current_status": "In_Progress_70%", "priority": "High", "source_self_assessment_ref": "KnowledgeMap.concepts.false_belief.confidence_score"}`.
    *   `architectural_maturation_targets`: (List of Objects/Dicts) Conceptual list of areas where the Self-Model has identified needs for capacity/efficiency changes or inter-module connectivity enhancements. e.g., `{"target_area": "WorkingMemory.CentralExecutive", "enhancement_goal": "Improve_task_switching_efficiency", "triggering_condition_summary": "Persistent WM overload during multi-tasking scenarios (ref: AutobiographicalLogSummary.major_failure_analyses.fail_id_X)", "status": "Identified_Pending_Strategy"}`.
    *   `self_correction_records`: (List of Objects/Dicts) Log of self-initiated corrections to its own tools, scripts, cognitive strategies, or knowledge representations. e.g., `{"correction_id": "SC001", "timestamp": ..., "item_corrected_ref": "CapabilityInventory.tools.SelfGeneratedScript_DataCleaning_001", "reason": "Detected inefficiency in string parsing logic.", "outcome": "Improved_performance_by_15%"}`.

## 3. Core Conceptual Algorithms and Processes

The Self-Model engages in several key ongoing processes:

### 3.1. Metacognition & Self-Assessment
*   **A. Performance Monitoring & Analysis:**
    *   **Inputs:** Feedback from Planning & Learning Modules, action outcomes from World Model, `AutobiographicalLogSummary`.
    *   **Process:** Continuously ingests performance data, compares outcomes against goals/expectations, identifies success/failure patterns related to tasks/skills/tools/contexts. Updates `CapabilityInventory` (proficiency) and `KnowledgeMap` (confidence). Logs insights to `AutobiographicalLogSummary`.
    *   **Output:** Updated `CapabilityInventory`, `KnowledgeMap`; signals to `DevelopmentalState`.
*   **B. Confidence Assessment:**
    *   **Inputs:** Query/task, `KnowledgeMap`, `CapabilityInventory`.
    *   **Process:** For knowledge, combines `understanding_level`, `confidence_score`, `groundedness_score`, access history from `KnowledgeMap`. For capabilities, uses `proficiency_level` and `success_rate_history` from `CapabilityInventory`.
    *   **Output:** Confidence score (0.0-1.0).
*   **C. Knowledge Gap & Skill Deficiency Identification:**
    *   **Inputs:** Performance analysis, LTM retrieval failures, user feedback, `KnowledgeMap`.
    *   **Process:** Identifies concepts/skills linked to poor performance or low confidence. Updates `KnowledgeMap.knowledge_gaps` or flags items in `CapabilityInventory`.
    *   **Output:** Signals to `DevelopmentalState` for learning goals; triggers for Motivational System.

### 3.2. Ethical Framework Application & Evolution
*   **A. Ethical Evaluation of Planned Actions:**
    *   **Inputs:** Proposed action/plan (from Planning), current context (World Model, WM), `EthicalFramework`, `AutobiographicalLogSummary` (dilemma log).
    *   **Process:** Retrieves relevant rules/principles from `EthicalFramework`. Evaluates action against them (direct matching, consequence projection). If conflicts, uses `value_conflict_resolution_strategies`. Consults past dilemmas.
    *   **Output:** Ethical assessment to Planning Module (e.g., Permissible, Impermissible, Caution).
*   **B. Ethical Framework Updating (Learning):**
    *   **Inputs:** Feedback on actions, outcomes of dilemmas, explicit ethical instruction, inputs from Learning Module.
    *   **Process:** Learning Module, guided by Self-Model, may modify strength/applicability of `learned_ethical_principles`, derive new ones, update `contextual_rules_of_conduct`, log new dilemmas, refine `value_conflict_resolution_strategies`.
    *   **Output:** Updated `EthicalFramework`.

### 3.3. Guiding Self-Improvement & Architectural Maturation
*   **A. Translation of Self-Assessment into Developmental Goals:**
    *   **Inputs:** Identified gaps/deficiencies, performance bottlenecks, `DevelopmentalState.active_developmental_goals`.
    *   **Process:** Prioritizes gaps. Formulates SMART-like developmental goals. Updates `DevelopmentalState.active_developmental_goals`.
    *   **Output:** New/updated goals to Motivational System.
*   **B. Conceptual Triggering/Guidance of Architectural Maturation (Ref: PiaAGI.md Sec 3.2.1):**
    *   **Inputs:** Persistent bottlenecks, `DevelopmentalState` analysis.
    *   **Process (Conceptual):** Flags systemic limitation. Formulates "developmental imperative" (e.g., "Enhance WM chunking"). This imperative conceptually guides underlying systems/Learning Modules (e.g., prioritize specific internal training, re-allocate resources, suggest external supervisor intervention).
    *   **Output:** Updated `DevelopmentalState.architectural_maturation_targets`; directives to Learning Modules.

### 3.4. ALITA-Inspired Self-Correction Loop for Tool/Script Generation (Interaction with other modules)
*   **Inputs:** Tool/script failure notification (from Behavior Generation sandbox), error details, original specifications, `CapabilityInventory`, `AutobiographicalLogSummary`.
*   **Process:**
    1.  Log failure (`AutobiographicalLogSummary`, `DevelopmentalState.self_correction_records`).
    2.  Analyze failure with Learning Module (pinpoint error type). Emotion Module may provide affective tag.
    3.  Propose modifications (script, design, environment) with Learning Module.
    4.  Iterate (feed back to Planning/Behavior Generation) or abandon (flag issue in `CapabilityInventory`, generate new learning goal in `DevelopmentalState`).
*   **Output:** Refined tool/script specs; updated `CapabilityInventory`; new learning goals.

## 4. Key Interactions with Other CML Modules

The Self-Model is highly interconnected:

*   **Working Memory / Central Executive:** Receives summaries of current cognitive load, active goals, emotional state. Provides confidence scores and ethical judgments that can influence attention and processing priorities.
*   **Long-Term Memory (especially Episodic LTM):** Provides the historical data (autobiographical memory) for self-assessment, learning, and identity continuity. The Self-Model directs what significant self-relevant experiences are consolidated.
*   **Learning Module(s):** Receives directives for targeted learning based on identified gaps. Provides feedback on learning progress and ethical outcomes, which updates the Self-Model's knowledge map, capability inventory, and ethical framework. Key partner in self-correction and adaptation.
*   **Motivational System Module:** Receives self-assessed knowledge gaps and developmental goals, which can become intrinsic motivations (e.g., curiosity, competence). The Self-Model's values can also shape or constrain goal generation.
*   **Emotion Module:** Receives context from the Self-Model for appraisals (e.g., "is this event relevant to my core values?"). The Self-Model logs and learns from emotional patterns, contributing to emotional self-awareness and regulation strategies.
*   **Planning and Decision-Making Module:** Receives capability assessments (for plan feasibility) and crucial ethical constraints/evaluations for actions. Receives feedback on plan success/failure.
*   **World Model:** The Self-Model contributes its `Self-State Representation` to the World Model. It also queries the World Model for external context relevant to self-assessment (e.g., "how did my actions affect the environment?").
*   **Theory of Mind (ToM) / Social Cognition Module:** A robust Self-Model (understanding of "self") is a prerequisite for sophisticated ToM (understanding "other"). The Self-Model's understanding of its own mental state types (beliefs, desires, intentions) informs how it models others.
*   **Communication Module:** The Self-Model influences communication style (via personality, role), confidence expressed, and the ethical stance conveyed in dialogues.
*   **Behavior Generation Module:** The Self-Model is involved in the ALITA-inspired self-correction loop for tools/scripts generated and tested by this module.

## 5. Developmental Aspects

The Self-Model is not static; it undergoes significant development across PiaAGI stages (Ref: PiaAGI.md Section 4.1.10, Developmental Trajectory).
*   **PiaSeedling:** Rudimentary awareness of basic internal state, minimal history.
*   **PiaSprout:** Simple representation of capabilities, basic rule learning.
*   **PiaSapling:** More explicit self-assessment, awareness of personality/emotions, learning of simple ethical rules.
*   **PiaArbor:** Nuanced self-reflection, modeling of own cognitive biases, more complex ethical framework, awareness of developmental goals.
*   **PiaGrove:** Deep self-understanding, capacity to model own architecture, robust internalized ethics, proactive self-evolution.

Developmental Scaffolding (PiaAGI.md Section 5.4) plays a key role in guiding the maturation of the Self-Model, particularly its ethical framework and self-assessment capabilities.

## 6. Open Research Questions and Future Directions

*   How to effectively represent and quantify "understanding_level", "confidence_score", and "groundedness_score" in the `KnowledgeMap`?
*   What are robust computational mechanisms for learning and abstracting `learned_ethical_principles` from diverse experiences and feedback?
*   How can `value_conflict_resolution_strategies` be effectively learned and generalized?
*   What are the precise triggers and mechanisms for the Self-Model to guide `architectural_maturation`? How can this be implemented safely?
*   How does the Self-Model balance stability of identity with the need for continuous adaptation and learning (the stability-plasticity dilemma for self-representation)?
*   The nature and depth of "introspection" available to the Self-Model regarding other modules' internal workings.

This specification provides a conceptual foundation. Future work will involve refining these data structures, detailing algorithms, and eventually, implementing and testing the Self-Model module within the broader PiaAGI ecosystem.

---
Return to [PiaAGI Core Document](../../PiaAGI.md)
Return to [PiaCML README](../../PiaAGI_Research_Tools/PiaCML/README.md)
